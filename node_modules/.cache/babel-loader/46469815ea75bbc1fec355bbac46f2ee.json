{"remainingRequest":"E:\\Code\\VsCode\\测试代码\\login-demo\\node_modules\\thread-loader\\dist\\cjs.js!E:\\Code\\VsCode\\测试代码\\login-demo\\node_modules\\babel-loader\\lib\\index.js!E:\\Code\\VsCode\\测试代码\\login-demo\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\Code\\VsCode\\测试代码\\login-demo\\src\\utils\\request.js","dependencies":[{"path":"E:\\Code\\VsCode\\测试代码\\login-demo\\src\\utils\\request.js","mtime":1537410458619},{"path":"E:\\Code\\VsCode\\测试代码\\login-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1537168178297},{"path":"E:\\Code\\VsCode\\测试代码\\login-demo\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Code\\VsCode\\测试代码\\login-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\Code\\VsCode\\测试代码\\login-demo\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport { Message } from 'element-ui';\nimport store from '@/store';\nimport { getToken } from '@/utils/auth'; // create an axios instance\n\nvar service = axios.create({\n  baseURL: process.env.BASE_API,\n  // api 的 base_url\n  timeout: 5000 // request timeout\n\n}); // request interceptor\n\nservice.interceptors.request.use(function (config) {\n  // Do something before request is sent\n  if (store.getters.token) {\n    // 让每个请求携带token-- ['X-Token']为自定义key 请根据实际情况自行修改\n    config.headers['X-Token'] = getToken();\n  }\n\n  return config;\n}, function (error) {\n  // Do something with request error\n  console.log(error); // for debug\n\n  Promise.reject(error);\n}); // response interceptor\n\nservice.interceptors.response.use(function (response) {\n  return response;\n},\n/**\r\n * 下面的注释为通过在response里，自定义code来标示请求状态\r\n * 当code返回如下情况则说明权限有问题，登出并返回到登录页\r\n * 如想通过 xmlhttprequest 来状态码标识 逻辑可写在下面error中\r\n * 以下代码均为样例，请结合自生需求加以修改，若不需要，则可删除\r\n */\n// response => {\n//   const res = response.data\n//   if (res.code !== 20000) {\n//     Message({\n//       message: res.message,\n//       type: 'error',\n//       duration: 5 * 1000\n//     })\n//     // 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;\n//     if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\n//       // 请自行在引入 MessageBox\n//       // import { Message, MessageBox } from 'element-ui'\n//       MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\n//         confirmButtonText: '重新登录',\n//         cancelButtonText: '取消',\n//         type: 'warning'\n//       }).then(() => {\n//         store.dispatch('FedLogOut').then(() => {\n//           location.reload() // 为了重新实例化vue-router对象 避免bug\n//         })\n//       })\n//     }\n//     return Promise.reject('error')\n//   } else {\n//     return response.data\n//   }\n// },\nfunction (error) {\n  console.log('err' + error); // for debug\n\n  Message({\n    message: error.message,\n    type: 'error',\n    duration: 5 * 1000\n  });\n  return Promise.reject(error);\n});\nexport default service;",{"version":3,"sources":["E:\\Code\\VsCode\\测试代码\\login-demo\\src\\utils\\request.js"],"names":["axios","Message","store","getToken","service","create","baseURL","process","env","BASE_API","timeout","interceptors","request","use","getters","token","config","headers","console","log","error","Promise","reject","response","message","type","duration"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB,C,CAEA;;AACA,IAAMC,UAAUJ,MAAMK,MAAN,CAAa;AAC3BC,WAASC,QAAQC,GAAR,CAAYC,QADM;AACI;AAC/BC,WAAS,IAFkB,CAEb;;AAFa,CAAb,CAAhB,C,CAKA;;AACAN,QAAQO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,kBAAU;AACR;AACA,MAAIX,MAAMY,OAAN,CAAcC,KAAlB,EAAyB;AACvB;AACAC,WAAOC,OAAP,CAAe,SAAf,IAA4Bd,UAA5B;AACD;;AACD,SAAOa,MAAP;AACD,CARH,EASE,iBAAS;AACP;AACAE,UAAQC,GAAR,CAAYC,KAAZ,EAFO,CAEY;;AACnBC,UAAQC,MAAR,CAAeF,KAAf;AACD,CAbH,E,CAgBA;;AACAhB,QAAQO,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CACE;AAAA,SAAYU,QAAZ;AAAA,CADF;AAEE;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACPL,UAAQC,GAAR,CAAY,QAAQC,KAApB,EADO,CACoB;;AAC3BnB,UAAQ;AACNuB,aAASJ,MAAMI,OADT;AAENC,UAAM,OAFA;AAGNC,cAAU,IAAI;AAHR,GAAR;AAKA,SAAOL,QAAQC,MAAR,CAAeF,KAAf,CAAP;AACD,CA3CH;AA8CA,eAAehB,OAAf","sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  baseURL: process.env.BASE_API, // api 的 base_url\r\n  timeout: 5000 // request timeout\r\n})\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  config => {\r\n    // Do something before request is sent\r\n    if (store.getters.token) {\r\n      // 让每个请求携带token-- ['X-Token']为自定义key 请根据实际情况自行修改\r\n      config.headers['X-Token'] = getToken()\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    // Do something with request error\r\n    console.log(error) // for debug\r\n    Promise.reject(error)\r\n  }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  response => response,\r\n  /**\r\n   * 下面的注释为通过在response里，自定义code来标示请求状态\r\n   * 当code返回如下情况则说明权限有问题，登出并返回到登录页\r\n   * 如想通过 xmlhttprequest 来状态码标识 逻辑可写在下面error中\r\n   * 以下代码均为样例，请结合自生需求加以修改，若不需要，则可删除\r\n   */\r\n  // response => {\r\n  //   const res = response.data\r\n  //   if (res.code !== 20000) {\r\n  //     Message({\r\n  //       message: res.message,\r\n  //       type: 'error',\r\n  //       duration: 5 * 1000\r\n  //     })\r\n  //     // 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;\r\n  //     if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\r\n  //       // 请自行在引入 MessageBox\r\n  //       // import { Message, MessageBox } from 'element-ui'\r\n  //       MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\r\n  //         confirmButtonText: '重新登录',\r\n  //         cancelButtonText: '取消',\r\n  //         type: 'warning'\r\n  //       }).then(() => {\r\n  //         store.dispatch('FedLogOut').then(() => {\r\n  //           location.reload() // 为了重新实例化vue-router对象 避免bug\r\n  //         })\r\n  //       })\r\n  //     }\r\n  //     return Promise.reject('error')\r\n  //   } else {\r\n  //     return response.data\r\n  //   }\r\n  // },\r\n  error => {\r\n    console.log('err' + error) // for debug\r\n    Message({\r\n      message: error.message,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n"]}]}